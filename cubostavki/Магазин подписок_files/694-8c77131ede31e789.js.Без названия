"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[694],{2429:function(e,s,t){t.d(s,{Z:function(){return n}});class n{static getCachedPromise(e,s){if(this.promises[e])return this.promises[e];let t=s().then(s=>(this.promises[e]=null,s)).catch(s=>{throw this.promises[e]=null,s});return this.promises[e]=t,t}}n.promises={}},1191:function(e,s,t){t.d(s,{Z:function(){return i}});var n=t(8472),a=t(1103),r=t(2429);class i{static login(e,s){return new Promise((t,n)=>{this.axios.post("login",{username:e,password:s}).then(e=>{console.log(e.data),t({accessToken:e.data.accessToken,refreshToken:e.data.refreshToken})}).catch(e=>{console.error(e.response.data.detail),n(e.response.data.detail)})})}static refreshTokens(){return r.Z.getCachedPromise("refreshTokens",()=>new Promise((e,s)=>{this.axios.post("refresh",{refreshToken:a.st.getState().refreshToken}).then(s=>{console.log(s.data),e({accessToken:s.data.accessToken,refreshToken:s.data.refreshToken})}).catch(e=>{console.error(e.response.data.detail),s(e.response.data.detail)})}))}static logout(){return new Promise((e,s)=>{this.axios.post("logout",{refreshToken:a.st.getState().refreshToken}).then(()=>{e()}).catch(e=>{console.error(e.response.data.detail),s(e.response.data.detail)})})}static retrieveRegistrationInfo(e){return new Promise((s,t)=>{this.axios.post("retrieve_registration_info",{token:e}).then(e=>{console.log(e.data),s(e.data)}).catch(e=>{console.error(e.response.data.detail),t(e.response.data.detail)})})}static register(e,s,t,n){return new Promise((a,r)=>{this.axios.post("register",{token:e,password:s,email:t,emailToken:n}).then(()=>{a()}).catch(e=>{console.error(e.response.data.detail),r(e.response.data.detail)})})}static sendRegistrationMail(e,s){return new Promise((t,n)=>{this.axios.post("send_registration_mail",{token:e,email:s}).then(()=>{t()}).catch(e=>{console.error(e.response.data.detail),n(e.response.data.detail)})})}static sendPasswordRecoverMail(e,s){return new Promise((t,n)=>{this.axios.post("password_recover/send_mail",{username:e,email:s}).then(()=>{t()}).catch(e=>{console.error(e.response.data.detail),n(e.response.data.detail)})})}static checkPasswordRecoverToken(e){return new Promise((s,t)=>{this.axios.post("password_recover/check_token",{token:e}).then(e=>{console.log(e.data),s(e.data)}).catch(e=>{console.error(e.response.data.detail),t(e.response.data.detail)})})}static resetPassword(e,s){return new Promise((t,n)=>{this.axios.post("password_recover/reset",{token:e,password:s}).then(()=>{t()}).catch(e=>{console.error(e.response.data.detail),n(e.response.data.detail)})})}}i.axios=n.Z.create({baseURL:"https://portal.api.cuboserver.net/auth/"})},740:function(e,s,t){var n,a;t.d(s,{Q:function(){return n},l:function(){return r}}),(a=n||(n={})).TIER_1="TIER_1",a.TIER_2="TIER_2",a.TIER_3="TIER_3",a.TIER_X="TIER_X";class r{static getBadgeImagePath(e){switch(e){case"TIER_1":return"/shop/tier1.png";case"TIER_2":return"/shop/tier2.png";case"TIER_3":return"/shop/tier3.png";case"TIER_X":return"/shop/tierX.png"}}static getDisplayName(e){switch(e){case"TIER_1":return"Tier I";case"TIER_2":return"Tier II";case"TIER_3":return"Tier III";case"TIER_X":return"Tier X"}}}},4694:function(e,s,t){t.d(s,{default:function(){return x}});var n=t(7437),a=t(2265),r=t(6648),i=t(3289),l=t(7155),o=t(6463),c=t(2683),d=t(1103),h=t(1191),u=t(740),p=t(266);function f(e){let{profile:s,profileFetched:t,setProfileFetched:i,clearProfile:l}=(0,d.Oz)(),{clearRefreshToken:f}=(0,d.st)(),{clearAccessToken:m}=(0,d.vN)(),{clearCache:x}=(0,d.oY)();(0,o.usePathname)();let g=(0,o.useRouter)(),[w,v]=(0,a.useState)(!1);function k(e){v(!1),g.push(e)}if(!t)return(0,n.jsx)(n.Fragment,{children:" "});if(null===s)return(0,n.jsxs)("button",{className:"transition rounded-full px-4 py-2 text-center font-bold tracking-wide hover:bg-white/10 flex gap-2 -mt-2 lg:mt-0 "+e.className,onClick:()=>{g.push("/me/login")},children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"size-6",children:(0,n.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M7 3a1 1 0 000 2h11a1 1 0 011 1v12a1 1 0 01-1 1H7a1 1 0 100 2h11a3 3 0 003-3V6a3 3 0 00-3-3H7zm5.707 4.293a1 1 0 10-1.414 1.414L13.586 11H4a1 1 0 100 2h9.586l-2.293 2.293a1 1 0 001.414 1.414l4-4a1 1 0 000-1.414l-4-4z",clipRule:"evenodd"})}),(0,n.jsx)("p",{className:"hidden lg:block",children:"Войти"})]});{let e=[{icon:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"size-6",children:(0,n.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M14.293 1.293a1 1 0 011.414 0l8 8a1 1 0 010 1.414L18 16.414V19a3 3 0 01-3 3H5a5 5 0 01-5-5V8a4 4 0 014-4h7.586l2.707-2.707zM9.586 6H4a2 2 0 00-2 2v9a3 3 0 003 3h10a1 1 0 001-1v-8a1 1 0 00-1-1H5a2 2 0 01-2-2v-.5a1 1 0 012 0V8h2.586l2-2zm.828 2H15a3 3 0 013 3v2.586L21.586 10 15 3.414l-2.293 2.293L10.414 8z",clipRule:"evenodd"})}),text:"Управление подпиской",onClick:()=>{k("/me/subscription")}},{icon:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"size-6 -ml-[3px] mr-[3px]",children:(0,n.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M8 9a4 4 0 118 0 4 4 0 01-8 0zm7.824 4.623a6 6 0 10-7.649 0C4.986 14.746 3 17.247 3 20a1 1 0 102 0c0-2.27 2.355-5 7-5s7 2.73 7 5a1 1 0 102 0c0-2.753-1.984-5.254-5.176-6.377z",clipRule:"evenodd"})}),text:"Аккаунт",onClick:()=>{k("/me/account")}},{icon:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"size-6 -ml-[3px] mr-[3px]",children:(0,n.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M7 3a1 1 0 000 2h11a1 1 0 011 1v12a1 1 0 01-1 1H7a1 1 0 100 2h11a3 3 0 003-3V6a3 3 0 00-3-3H7zm5.707 4.293a1 1 0 10-1.414 1.414L13.586 11H4a1 1 0 100 2h9.586l-2.293 2.293a1 1 0 001.414 1.414l4-4a1 1 0 000-1.414l-4-4z",clipRule:"evenodd"})}),text:"Выйти",onClick:function(){h.Z.logout().finally(()=>{f(),m(),l(),x(),g.refresh()})}}];return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(p.Z,{username:s.username,onClick:()=>{v(!w)}}),(0,n.jsx)(c.Z,{opened:w,elements:[(0,n.jsxs)("div",{className:"px-2 text-left tracking-wide mb-4 ml-2 mt-3",children:[s.subscription?(0,n.jsx)(r.default,{src:u.l.getBadgeImagePath(s.subscription.tier),alt:"tier I",width:85,height:22.5,className:"mb-0.5"}):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)("p",{className:"font-minecraft text-lg font-medium ",children:s.username})]},"profileInfo"),...e.map(e=>(0,n.jsxs)("div",{onClick:e.onClick,className:"transition rounded-full px-4 py-2 text-left font-medium tracking-wide hover:bg-white/10 flex gap-2 cursor-pointer text-nowrap",children:[e.icon,e.text]},e.text))],className:"absolute z-50 right-0 mt-2"})]})}}var m=t(7138);function x(){let e=(0,o.useRouter)(),s=[{name:"Магазин",active:!1,icon:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"size-6",children:(0,n.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M2 2a1 1 0 000 2h.472a1 1 0 01.965.737l.416 1.526L6 14.133V16c0 .694.235 1.332.63 1.84A2.5 2.5 0 1010.95 19h3.1a2.5 2.5 0 104.771-.43A1 1 0 0018 17H9.001a1 1 0 01-1-1v-1h10.236a2 2 0 001.93-1.474l1.635-6A2 2 0 0019.87 5H5.582l-.215-.79A3 3 0 002.472 2H2zm14.5 17a.5.5 0 100 1 .5.5 0 000-1zm1.736-6H7.764L6.127 7h13.744l-1.635 6zM8.5 19a.5.5 0 100 1 .5.5 0 000-1z",clipRule:"evenodd"})}),href:"/store"}],[t,d]=(0,a.useState)(!1),[h,u]=(0,i.H)();return(0,a.useEffect)(()=>{t?u(h.current,{display:"block",opacity:1}):u(h.current,{opacity:0,transitionEnd:{display:"none"}})},[t]),(0,n.jsxs)("div",{className:"lg:mb-40",children:[(0,n.jsx)("nav",{className:"bg-zinc-950/70 backdrop-blur-sm font-light hidden lg:block fixed top-0 w-full z-50",children:(0,n.jsx)("div",{className:"lg:px-5 lg:max-w-screen-lg xl:max-w-screen-xl 2xl:max-w-screen-2xl mx-auto",children:(0,n.jsxs)("div",{className:"flex flex-wrap items-center justify-between py-4",children:[(0,n.jsx)("a",{href:"#",className:"flex items-center space-x-3 translate-y-1 w-[212px]",children:(0,n.jsx)(r.default,{src:"/common/cuboserver_logo.png",alt:"a",height:32,width:212,onClick:()=>e.push("/")})}),(0,n.jsx)("div",{className:"flex md:order-2 space-x-3 md:space-x-0 justify-end xl:w-[212px]",children:(0,n.jsx)(f,{})}),(0,n.jsx)("div",{className:"items-center justify-between w-auto flex",id:"navbar-cta",children:(0,n.jsx)("ul",{className:"flex gap-10",children:s.map(e=>(0,n.jsx)("li",{children:(0,n.jsx)(m.default,{href:e.href,className:"block rounded-full text-white tracking-wide hover:bg-white/10 transition px-4 py-2 text-center","aria-current":"page",children:e.name})},e.name))})})]})})}),(0,n.jsxs)("nav",{className:"fixed top-0 z-[55] w-full bg-zinc-950/70 backdrop-blur-sm font-medium lg:hidden px-5 py-4 grid grid-cols-12",children:[(0,n.jsx)("div",{className:"col-span-2 flex items-center justify-start -mt-2",children:(0,n.jsx)(l.E.svg,{whileTap:{scale:.8},whileHover:{scale:1.2},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-7 focus:outline-none",onClick:()=>{d(!t)},children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})}),(0,n.jsx)("a",{href:"#",className:"flex items-center space-x-3 col-span-8",children:(0,n.jsx)(r.default,{src:"/common/cuboserver_logo.png",alt:"a",height:32,width:212,className:"mx-auto",onClick:()=>e.push("/")})}),(0,n.jsx)("div",{className:"col-span-2 flex items-center justify-end",children:(0,n.jsx)(f,{})})]}),(0,n.jsx)("div",{ref:h,className:"lg:-top-full top-0 bg-zinc-950/90 backdrop-blur-sm z-[45] fixed h-screen w-screen"}),(0,n.jsx)(c.Z,{className:"fixed z-[46] w-full top-20 px-8 lg:hidden",opened:t,elements:s.map((e,s)=>(0,n.jsxs)(m.default,{href:e.href,className:"flex gap-2 rounded-full text-white tracking-wide hover:bg-white/10 transition px-4 py-3 text-left",children:[(0,n.jsx)("div",{className:"mr-3",children:e.icon}),e.name]},s))})]})}},2683:function(e,s,t){t.d(s,{Z:function(){return r}});var n=t(7437),a=t(7155);function r(e){let s={open:{opacity:1,y:0,transition:{duration:.2}},closed:{opacity:0,y:20,transition:{duration:.2}}};return(0,n.jsx)(a.E.nav,{initial:!1,animate:e.opened?{display:"block"}:{transitionEnd:{display:"none"}},className:e.className,children:(0,n.jsx)(a.E.ul,{animate:e.opened?"open":"closed",variants:{open:{clipPath:"inset(0% 0% 0% 0% round 10px)",transition:{type:"spring",bounce:0,duration:.7,delayChildren:.3,staggerChildren:.05}},closed:{clipPath:"inset(10% 50% 90% 50% round 10px)",transition:{type:"spring",bounce:0,duration:.3}}},style:{pointerEvents:e.opened?"auto":"none"},className:"p-4 bg-zinc-900 border border-zinc-800 rounded-lg",children:e.elements.map((e,t)=>(0,n.jsx)(a.E.li,{variants:s,className:"",children:e},t))})})}t(2265)},266:function(e,s,t){t.d(s,{Z:function(){return i}});var n=t(7437),a=t(2265),r=t(6648);function i(e){let[s,t]=(0,a.useState)("");return(0,a.useEffect)(()=>{void 0===e.username?t("q"):t(e.username)},[e.username]),(0,n.jsx)(r.default,{src:"https://crafthead.net/helm/"+(s.length>0?s:"q")+"/100",onError:()=>{t("q")},alt:"image",width:100,height:100,className:"w-10 rounded-md cursor-pointer "+e.className,onClick:e.onClick})}},1103:function(e,s,t){t.d(s,{Oz:function(){return r},Wb:function(){return c},oY:function(){return o},st:function(){return i},vN:function(){return l}});var n=t(903),a=t(9291);let r=(0,n.U)(e=>({profile:null,profileFetched:!1,setProfile:s=>e({profile:s}),setProfileFetched:s=>e({profileFetched:s}),clearProfile:()=>e({profile:null})})),i=(0,n.U)((0,a.tJ)(e=>({refreshToken:null,setRefreshToken:s=>e({refreshToken:s}),clearRefreshToken:()=>e({refreshToken:null})}),{name:"cuboserver-credentials-store"})),l=(0,n.U)(e=>({accessToken:null,setAccessToken:s=>e({accessToken:s}),clearAccessToken:()=>e({accessToken:null})})),o=(0,n.U)(e=>({billingProfile:null,setBillingProfile:s=>e({billingProfile:s}),subscriptionChangePreview:null,setSubscriptionChangePreview:s=>e({subscriptionChangePreview:s}),tiersInfo:null,setTiersInfo:s=>e({tiersInfo:s}),clearCache:()=>e({billingProfile:null,subscriptionChangePreview:null,tiersInfo:null})})),c=(0,n.U)(e=>({title:"Cuboserver",setTitle:s=>e({title:s})}))}}]);